---
layout: default
---

# Routers: **File System Routing**

```ts {*|1,3|4-12|13-23}
import { BaseFileSystemRouter, cleanPath } from "vinxi/fs-router";

export class FSRouter extends BaseFileSystemRouter {
  toPath(src: string) {
    // 1. Convert file path to URL path
    const routePath = cleanPath(src, this.config)
      .slice(1) // Remove leading '/'
      .replace(/index$/, ""); // Treat 'index' as '/'

    // Ensure root path is '/'
    return routePath?.length > 0 ? `/${routePath}` : "/";
  }

  toRoute(filePath: string) {
    // 2. Define route object structure
    return {
      path: this.toPath(filePath), // Use the path generated above
      $component: {
        src: filePath, // The source file
        pick: ["default"], // Expect a default export
      },
    };
  }
}
```

<!--

[click] Vinxi provides `BaseFileSystemRouter` which handles watching files, HMR, etc. We just need to define our conventions.

[click] `toPath(src)`: This method takes the relative file path within the routes directory (e.g., `/index.tsx`, `/about.tsx`) and transforms it into the URL path (`/`, `/about`). We remove the leading slash provided by `cleanPath`, replace `index` with an empty string for root routes, and ensure the final path starts with `/`.

[click] `toRoute(filePath)`: This method defines the structure of the route objects that Vinxi will generate and make available via `import fileRoutes from "vinxi/routes"`.
    *   `path`: The URL path generated by `toPath`.
    *   `$component`: A special key starting with `$` tells Vinxi this is a dynamic import (code-splitting!).
        *   `src`: The original file path.
        *   `pick`: Specifies which export(s) to use from the file (here, just the `default` export).

-->
